!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=function(e){e.on("moveend",s)},t.updateShareUrl=s,t.AddShareSettingsToConfig=function(e){var t=function(){var e=window.location.search;if(""===e)return;return function(e){e.center&&(e.center=e.center.split(",")),e.layers&&(e.layers=function(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}(e.layers)),e.baselayers&&(e.baselayers=e.baselayers.split(",")),e.pois&&(e.pois=e.pois.split(";").filter(function(e){return""!==e}).map(function(e){return(e=e.split(",")).length>2?(0,i.createPOI)(e[0],e[1],e.splice(2)):(0,i.createPOI)(e[0],e[1],null)})),e.layerGroups&&(e.layerGroups=e.layerGroups.split(","))}(e=function(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}(e=function(e){return(e=function(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}(e=e.substring(1))).split("&")}(e))),e}();if(!t)return;t.center&&(e.map.center=t.center);t.zoom&&(e.map.zoom=t.zoom);t.layers&&function(e,t){var n,r,a,o,i,l,s=e.enabledLayers;t["active-layers"]=s;var c=t.layers;for(n=0;n<s.length;n++)for(a in l=!1,i=s[n],c){if(!c.hasOwnProperty(a))return;for(o=c[a],r=0;r<o.length;r++)if(o[r].id===i){o[r].opacity=e.opacityVals[i],l=!0;break}if(l)break}}(t.layers,e);t.baselayers&&function(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)(n=a[r]).active=-1!==e.indexOf(n.id)}(t.baselayers,e);t.pois&&function(e,t){t.pois=e}(t.pois,e);t.tab&&(e.tab=t.tab);t.graph&&(e.graph=t.graph);t.layerGroups&&(e.layerGroups=function(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}(t.layerGroups,e))},t.BindCopyLinkEvents=function(){d3.select(document).on("click",c),d3.select(".shareurl-link a").on("click",u),d3.select(".shareurl-link-url").on("click",p),d3.select(".shareurl-link-popup-remover").on("click",d)};var r=n(1),a=n(15),o=n(5),i=n(9),l=n(2);function s(e){var t,n,a=(0,r.GetMap)(),o=[v(a),m(a),y(a),(t=(0,l.GetActiveLayerGroups)(),"layerGroups="+t.map(function(e){return e.id}).join(",")),g(a),b(),"tab="+d3.select(".panel-top-btn.active").attr("data-active"),"graph="+d3.select(".graph-type-btn.active").attr("data-type")];n=function(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}(o),window.history&&window.history.replaceState&&window.history.replaceState({},"",n),function(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}(),function(){var e,t,n,r,a=function(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}()}function c(){var e,t,n=[],r=!0;for(e=0,t=(n=function(e){var t=[];for(;e&&e.parentNode;)t.push(e),e=e.parentNode;return t}(d3.event.target)).length;e<t;e++)try{if(n[e].classList.contains("shareurl-link-popup")||n[e].classList.contains("shareurl-link")){r=!1;break}}catch(e){}r&&f(document.getElementsByClassName("shareurl-link-popup").item(0))}function u(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?f(e):function(e){e.classList.toggle("active"),h(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}(e)}function d(){f(document.getElementsByClassName("shareurl-link-popup").item(0))}function p(){h()}function f(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function h(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function v(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function m(e){return"zoom="+e.getZoom()}function y(e){var t,n,r=[],a={},i=(0,o.GetCurrentLayers)();for(e.eachLayer(function(e){var t=e.options;t&&t.layers&&(a[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")}),n=0;n<i.length;n++)t=i[n],r.push(t),r.push(a[t]);return"layers="+r.join(",")}function g(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===a.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function b(){var e=(0,i.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng,e.plots&&e.plots.length&&(t+=","+e.plots.join(",")),t+=";"}),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearMap=function(){(0,a.removeAllPointsOfInterest)(),(0,i.removeAllGraphs)(),(0,o.turnOffNonBaseLayers)(),(0,l.resetPanelState)(),(0,l.updatePanelDragOverlayHeight)(),(0,s.updateShareUrl)()},t.CreateMap=function(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},a=e.center||["38.5","-81"],o=e.zoom||6;return r=L.map(t,n).setView(a,o),L.control.attribution().addTo(r),document.getElementsByClassName("leaflet-control-zoom-in")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})}),document.getElementsByClassName("leaflet-control-zoom-out")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),r.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(r.getBounds()),nonInteraction:!0})}),r.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(r.getBounds()),nonInteraction:!0})}),r},t.GetMap=function(){return r};var r,a=n(9),o=n(5),i=n(10),l=n(2),s=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=function(){return l.filter(function(e){return e.active})},t.resetPanelState=function(){},t.getLayerGroups=function(){return r},t.SetupPanel=function(e,t){l=t["layer-groups-order"],function(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){this.parentNode.parentNode.id;var t=d3.select(this);e.layerDiv=t;e.hasOwnProperty("download");!function(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,a.toggleLayer)(e),c(e)})}(0,t),function(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}(0,t),u(e,t),t.node().appendChild(function(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,o.makeOpacitySlider)(e),a=function(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}(e);return n.appendChild(a),n.appendChild(r),n}(e))})}(r=function(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){var t=d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),s(),(0,i.updateShareUrl)()}).text(e.name);u(e,t)}).append("div").attr("class","layer-group")}(t["layer-groups-order"]),e),function(){if(e=window.navigator.userAgent,e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1)return;var e;var t=d3.select("#right-panel-drag-overlay");t.style("cursor","ew-resize"),t.call(d3.drag().on("drag",function(){(function(){s(),e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper").clientWidth,a=document.getElementById("map-wrapper"),o=d3.event.sourceEvent.x,i=n+(r-o-n),i=i<t?t:i>r?r:i,a.style.paddingRight=i+"px",e.style("width",i+"px");var e,t,n,r,a,o,i}).call(this)}))}(),document.getElementById("right-panel").onscroll=s},t.updatePanelDragOverlayHeight=s,t.toggleLayerToolsUI=c;var r,a=n(5),o=n(31),i=n(0),l=[];function s(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function c(e){if(e.layerDiv.select(".layer-tools-wrapper").classed("active",e.active),e.active){var t=e.layerDiv.select(".opacity-slider-handle").node();(0,o.setOpacitySliderPosition)(e,t,e.opacitiy)}}function u(e,t){var n=!0===t.classed("layer-group-btn"),r=n?"imgs/more-info-icon-64x64--white.png":"imgs/more-info-icon-64x64.png",a=n?"imgs/download-icon-v2-64x64-white.png":"imgs/download-icon-v2-64x64.png";e.download&&t.append("div").attr("class","download-btn-wrapper").append("a").attr("href",e.download).attr("title","download data for the layer "+e.name).append("img").attr("class","download-icon").attr("src",a).attr("alt","dowdownload data for the layer "+e.name).attr("title","download data for the layer "+e.name),e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.event.stopPropagation(),d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src",r).attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),e.infoAfterLineBreak?t.append("div").attr("class","layer-info-wrapper").html(function(e){return e.info+"<br><br>"+e.infoAfterLineBreak}):t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}},function(e,t,n){"use strict";var r=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var l=o.exec(r);if(!l)break;i.push(l)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(20).toString(),thenable:n(23).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});function a(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:a,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){var a=n.call(t,e,r);!function t(n,o){var i;try{if((i=n.call(a,o)).done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){t(a.next,e)},function(e){t(a.throw,e)}):t(a.next,i.value)}catch(e){return r&&r(e),void(r=null)}}(a.next)})}}r(),a(),e.exports={$asyncbind:r,$asyncspawn:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(3),o=((r=a)&&r.__esModule,function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return e.json().then(function(e){return i=e,t(this.parse({data:i}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=function(){return i},t.turnOffNonBaseLayers=function(){for(;l.length;){var e=l.pop();e.active=!1,c(e),document.getElementById(e.id).checked=!1,(0,o.toggleLayerToolsUI)(e)}},t.CreateDefaultLayers=function(e,t){var n,r,a,o,i,l;if(!t||0===t.length)return;for(n=0;n<t.length;n++)for(a in l=!1,i=t[n],e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===i){s(o[r]),l=!0;break}if(l)break}},t.toggleLayer=function(e){e.active?(c(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(s(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))},t.enableLayer=s,t.disableLayer=c,t.updateLayerOpacity=function(e,t){e.opacity=t,e.mapLayer.setOpacity(t)};var r=n(1),a=n(0),o=n(2),i=[],l=[];function s(e){var t=(0,r.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||function(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}(e),t.addLayer(e.mapLayer),function(e){i.push(e.id),l.push(e)}(e),function(){var e,t,n;for(t=0,n=l.length;t<n;t++)"overlay"===(e=l[t]).type&&e.mapLayer.bringToFront()}(),(0,a.updateShareUrl)()}function c(e){var t=(0,r.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),function(e){var t=i.indexOf(e.id);if(-1===t)return;i.splice(t,1),l.splice(t,1)}(e),(0,a.updateShareUrl)()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var n=r("script",null,document.body);return n.setAttribute("type","text/javascript"),new Promise(function(r){window[t]=function(e){n.remove(),delete window[t],r(e)},n.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStage=b;var r=n(11),a=m(n(17)),o=n(2),i=n(15),l=n(10),s=n(9),c=n(16),u=n(1),d=n(0),p=n(5),f=m(n(32)),h=m(n(33)),v=m(n(34));function m(e){return e&&e.__esModule?e:{default:e}}n(35);window.print=function(e){return console&&console.log(e)};var y=function(e){(0,r.ParseConfig)(e,g),(0,c.BindTabEvents)(),(0,d.BindCopyLinkEvents)(),(0,h.default)(),(0,v.default)()},g=function(e){var t=b();(0,d.AddShareSettingsToConfig)(e);var n=(0,u.CreateMap)(e.map);(0,i.CreateBaseLayers)(n,e.baselayers),(0,p.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,o.SetupPanel)(e.layers,e.layout),(0,a.default)(n),(0,f.default)(e.logo),e.tab&&(0,c.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,s.BindGraphEvents)(n,e.graphs),(0,d.BindUpdateShareUrl)(n),(0,s.SetupPointsOfInterest)(n,e.pois,e.graphs),(0,d.updateShareUrl)(),(0,l.SetupGraphs)(e.graphs,t)};function b(){return"prod"}window.Base=y,t.default={Base:y}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindGraphEvents=function(e,t){e.on("click",function(e){var n=e.latlng.lat,r=e.latlng.lng,a=p(n,r,null);!function(e){c.push(e)}(a),f(this,a,t),(0,o.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:JSON.stringify({action:"add map marker",lat:n,long:r}),nonInteraction:!1})})},t.removeAllPointsOfInterest=function(){var e=(0,i.GetMap)();c.forEach(function(t){e.removeLayer(t.marker)}),c=[]},t.GetAllPointsOfInterest=d,t.createPOI=p,t.SetupPointsOfInterest=function(e,t,n){!function(e){Array.prototype.push.apply(c,e)}(t);var r=d(),e=(0,i.GetMap)();r.forEach(function(t){f(e,t,n)})};var r=n(10),a=n(30),o=n(0),i=n(1),l=n(16),s=n(2),c=[];function u(e,t,n,r){var a=function(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){var a;ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),a=r,c=c.filter(function(e){return!(e===a)}),function(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,o.updateShareUrl)()}(e,t,n),(0,s.updatePanelDragOverlayHeight)(),(0,o.updateShareUrl)()})}function d(){return c}function p(e,t,n){return{lat:e,lng:t,plots:n||["baseline","2015","thresholds"]}}function f(e,t,n){var o=(0,r.createGraphDiv)(t,n),i=(0,a.createMarker)(t.lat,t.lng);t.graphDiv=o,t.marker=i,i.addTo(e),u(e,o,i,t),d3.select(o).on("mouseenter",function(e){i.setIcon((0,a.getIcon)("hover"))}),d3.select(o).on("mouseleave",function(){i.setIcon((0,a.getIcon)("graph"))}),i.on("click dblclick",function(e){!function(e,t){e.originalEvent.stopPropagation(),(0,l.HandleTabChange)("graphs-active"),function(e){document.getElementById("right-panel").scrollTop=e.graphDiv.offsetTop}(t),function(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}(t)}(e,t)}),i.on("mouseover",function(e){i.setIcon((0,a.getIcon)("hover"))}),i.on("mouseout",function(e){i.setIcon((0,a.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=function(e,t){var n=e.serviceUrl[t];d3.selectAll(".graph-type-btn").on("click",h),Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=this.getMonth(),t=this.getDate(),n=[0,31,59,90,120,151,181,212,243,273,304,334][e]+t;return e>1&&this.isLeapYear()&&n++,n};var r=n+"?lng=-82.5515&lat=35.5951",a=(0,i.GetAjaxObject)(function(){});a.open("GET",r),a.send()},t.removeAllGraphs=function(){var e=document.getElementById("graph-list");for(;e.firstChild;)e.removeChild(e.firstChild)},t.HandleGraphTabChange=v,t.createGraphDiv=function(e,t){var n=parseFloat(e.lat).toFixed(3),a=parseFloat(e.lng).toFixed(3),h=document.createElement("div"),v=document.createElement("div");h.appendChild(v);var m=function(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,o.GetMap)().panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}(e),L=document.createTextNode("Lat: "+n+", Long: "+a),j=document.createElement("div");j.className="graph-lat-lon",j.appendChild(L),v.appendChild(m),v.appendChild(j);var A=document.createElement("div");return A.classList.add("graph-loading-div"),h.appendChild(A),h.classList.add("graph-elem"),h.classList.add("graph-loading"),v.classList.add("graph-elem-header"),document.getElementById("graph-list").appendChild(h),function(e,t,n){var a=(0,l.getStage)(),o=n.serviceUrl[a]+"?lng="+e.lng+"&lat="+e.lat,h=(0,i.GetAjaxObject)(function(n){!function(e,t,n){(function(e,t,n){var r=function(e){var t=[];return e.forEach(function(e){t.push({date:e[0],ndvi:e[1]})}),t}(e=function(e){for(var t=0;t<e.length;t++)e[t]=e[t].split(","),e[t]=[x(e[t][0]),e[t][1]];return e}(e)),a=function(e){var t,n,r,a={keys:[]};for(r=0;r<e.length;r++)t=e[r],n=t[0].getFullYear(),"03"!==String(t[0].getMonth()).concat(String(t[0].getDate()))&&"02"!==String(t[0].getMonth()).concat(String(t[0].getDate()))||(n=String(parseInt(n)-1)),a.hasOwnProperty(n)||(a[n]=[],a.keys.push(n)),a[n].push(t);return a.baseline=p(e),a}(e),o=function(e,t){var n=[],r=[];e.forEach(function(e){r.push(e[1]),n.push(E(e[0]))});for(var a=O(r,n),o=a[1]<180?(a[1]+180)%360:a[1]-180,i=!1,l=0,d=[],p=0;p<t[2001].length&&!i;p++){var f=t[2001][p][0];E(f)>=o&&(i=!0,l=p)}c=e.length/s,u=c-1;for(var h=l,v=0;v<=u;v++){d[v]=[];for(var m=0;m<s;m++)d[v].push(e[h]),h++}return d.pop(),d}(e,a);(function(e,t){var n=[],r=[];e.forEach(function(e){r.push(e.date),n.push(e.ndvi)});for(var a=[],o=0,i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(46).keys())),l=0;l<c;l++)a=a.concat([{type:"scatter",mode:"lines+markers",y:n.slice(o,o+46),x:i,customdata:r.slice(o,o+46),line:{color:_[l]},hovertemplate:"%{customdata|%B %d, %Y}: %{y:.1f}<extra></extra>"}]),o+=46,i=i.map(function(e){return e+46});var s=d3.select(t).append("div").classed("timeseries-graph",!0),u={responsive:!0,displaylogo:!1,displayModeBar:!0,modeBarButtonsToRemove:d};Plotly.newPlot(s.node(),a,{hovermode:"closest",showlegend:!1,margin:{l:23,r:30,t:50,b:35},modebar:{orientation:"h"},xaxis:{tickangle:"-45",tickvals:[0,46,92,138,184,230,276,322,368,414,460,506,552,598,644,690,736,782,828,874],ticktext:["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"]},yaxis:{range:[0,100]}},u)})(r,t),function(e,t){var n=[],r=[];e[2001].forEach(function(t,n){r.push([t[0],e.baseline[n]])}),e.keys.forEach(function(t){var r;n=n.concat(y(e[t],t,0===(r=t)?"#fff":_[parseInt(r,10)%_.length]))}),n=n.concat(y(r,"All-years mean","#000000",!0,"%{customdata|%B %d}<br>NDVI: %{y:.1f}<extra></extra>"));var a=d3.select(t).append("div").classed("overlapping-graph",!0),o={responsive:!0,displaylogo:!1,displayModeBar:!0,modeBarButtonsToRemove:d};Plotly.newPlot(a.node(),n,{hovermode:"closest",margin:{l:28,r:40,t:20,b:20},modebar:{orientation:"h"},legend:{title:{text:"Click to turn on/off"},x:1.07},xaxis:{tickangle:"0",tickvals:[1,32,60,91,121,152,182,213,244,274,305,335],ticktext:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{range:[0,100]}},o)}(a,t),function(e,t,n,r,a){var o=p(n.flat()),i=[],l=[],d=[],h=[],v=[],m=[];n[1].forEach(function(e,t){d.push([e[0],o[t]]),l.push(E(e[0]))}),t[2001].forEach(function(e){h.push(E(e[0]))}),e.forEach(function(e){v.push(e[1]),m.push(E(e[0]))});var y=O(v,m),L=y[1]<180?(y[1]+180)%360:y[1]-180,x=P(o,l,L),j=x.fifteenIndex,A=x.eightyIndex,S=(y=O(o.slice(j,A),l.slice(j,A)))[0],I=y[1],T={r:[0,10,20,40,60,80,100,250],theta:[0].concat(C([L],7))},M={r:[0,10,20,40,60,80,100,250],theta:[0].concat(C([x.fifteenEnd],7))},B={r:[0,10,20,40,60,80,100,250],theta:[0].concat(C([I],7))},N={r:[0,10,20,40,60,80,100,250],theta:[0].concat(C([x.eightyEnd],7))};i=(i=(i=(i=(i=i.concat(b(T,"lines","start pheno","Start of Phenological Year","#429bb8"))).concat(b(M,"lines","15% threshold","Start of Growing Season","#90ee90"))).concat(b(B,"lines","middle growing","Middle of Growing Season","#056608"))).concat(b(N,"lines","80% threshold","End of Growing Season","#ffa500"))).concat(function(e){return[{type:"scatterpolar",mode:"lines+markers",name:"Seasonality",visible:!(arguments.length>1&&void 0!==arguments[1])||arguments[1],showlegend:!1,r:[parseFloat(e[1]).toFixed(2),0],theta:[e[0],0],hovertemplate:["Seasonality: %{r}<extra></extra>",""],marker:{size:9,maxdisplayed:1},line:{color:"#ff0000",width:4}}]}([I,S]));var R=d3.select(r).append("div").classed("polar-graph",!0);n.forEach(function(e,t){i=i.concat(g(e,"Pheno Year "+parseInt(t+1),_[t]))}),i=i.concat(g(d,"All-years mean","#000000",!0,"%{customdata|%B %d}<br>NDVI: %{r:.1f}<extra></extra>"));var G={responsive:!0,displaylogo:!1,displayModeBar:!0,modeBarButtons:[[{name:"Zoom In",icon:Plotly.Icons.zoom_plus,click:function(e){var t=e.layout.polar.radialaxis.tickvals;(e.layout.polar.radialaxis.range[1]-10)%20==0&&t[t.length-1]+20!=e.layout.polar.radialaxis.range[1]-10&&t.pop(),Plotly.relayout(e,w(e.layout.polar.radialaxis.range[1]-10,t))}},{name:"Zoom Out",icon:Plotly.Icons.zoom_minus,click:function(e){var t=e.layout.polar.radialaxis.tickvals;(e.layout.polar.radialaxis.range[1]+10)%20==0&&t[t.length-1]+20!=e.layout.polar.radialaxis.range[1]+10&&t.push(e.layout.polar.radialaxis.range[1]-10),Plotly.relayout(e,w(e.layout.polar.radialaxis.range[1]+10,t))}},{name:"Reset axes and traces",icon:Plotly.Icons.home,click:function(e){for(var t=1;t<c;t++)document.getElementById("Pheno Year "+t+a.lat+a.lng).checked=!1;document.getElementById("All-years mean"+a.lat+a.lng).checked=!0,Plotly.restyle(e,{visible:!1},[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),Plotly.restyle(e,{visible:!0},23),Plotly.restyle(e,{theta:[[0].concat(C([x.fifteenEnd],7))]},1),Plotly.restyle(e,{theta:[[0].concat(C([I],7))]},2),Plotly.restyle(e,{theta:[[0].concat(C([x.eightyEnd],7))]},3),Plotly.restyle(R.node(),{r:[[parseFloat(S).toFixed(2),0]],theta:[[I,0]]},4),Plotly.relayout(e,w()),Q={}}},"toImage"]]},D=w();Plotly.newPlot(R.node(),i,D,G);var U=R.node(),F=document.createElement("div");F.className="polar-legend-wrapper",U.appendChild(F);var Y=document.createElement("div");Y.className="polar-legend-pheno-wrapper";var H=document.createElement("div");H.className="polar-legend-pheno-boxes-wrapper";var z=document.createElement("div");z.classList.add("polar-legend-pheno-header"),z.classList.add("polar-legend-header"),z.innerHTML="Phenological Year";var $=document.createElement("div");$.className="polar-legend-pheno-header-buffer",Y.appendChild(z),Y.appendChild($),Y.appendChild(H);var q=document.createElement("div");q.classList.add("polar-legend-calendar-header"),q.classList.add("polar-legend-header"),q.innerHTML="Calendar Year";var K=U.data[5].customdata[0].getDOY(),J=K/365*20;H.style.paddingTop=J+"px";var W=20*c,Z=d3.scaleLinear().domain([2e3,2019]).range([0,W]),V=d3.axisRight(Z).ticks(u+1).tickFormat(d3.format("d")),X=d3.select(F).append("div").attr("class","calendar-svg-wrapper");X.node().appendChild(q),X.append("svg").attr("width",100).attr("height",W).append("g").attr("width",100).attr("height",""+(W+8)).attr("transform","translate(0, 8)").call(V);var Q={};U.data.forEach(function(e,t){if(e.inLegend){var n=document.createElement("div");n.style.height="20px";var r=document.createElement("input"),o=document.createElement("span");o.className="checkmark",r.type="checkbox",r.id=e.name+a.lat+a.lng;var i=document.createElement("label");if(i.className="container",!0===e.visible&&(r.checked=!0),o.style.width="20px",o.style.height="20px",o.style.backgroundColor=e.line.color,r.onclick=function(){1==document.getElementById(r.id).checked?Plotly.restyle(U,{visible:!0},t):Plotly.restyle(U,{visible:!1},t);var n=e.r,a=e.theta,o=e.name,i=void 0,c=void 0,u=void 0,d=void 0;if("All-years mean"!==o){if(Q[o]?delete Q[o]:Q[o]=n,Object.keys(Q).length>=1){var p=Object.values(Q).flat(),h=function(e){for(var t,n,r=[],a=0;a<s;a++){t=[];for(var o=a;o<e.length;o+=s)t.push(parseInt(e[o],10));n=f(t),r.push(n)}return r}(p),v=P(h,l,L);c=v.fifteenEnd,u=v.eightyEnd;var m=v.fifteenIndex,y=v.eightyIndex,g=O(h.slice(m,y),a.slice(m,y));i=g[1],d=[[parseFloat(g[0]).toFixed(2),0],[i,0]]}else c=x.fifteenEnd,u=x.eightyEnd,i=I,d=[[parseFloat(S).toFixed(2),0],[I,0]];Plotly.restyle(R.node(),{hovertext:"Start of Growing Season: Julian day "+k(c),theta:[[0].concat(C([c],7))]},1),Plotly.restyle(R.node(),{hovertext:"Middle of Growing Season: Julian day "+k(i),theta:[[0].concat(C([i],7))]},2),Plotly.restyle(R.node(),{hovertext:"End of Growing Season: Julian day "+k(u),theta:[[0].concat(C([u],7))]},3),Plotly.restyle(R.node(),{r:[d[0]],theta:[d[1]]},4)}},"All-years mean"===e.name)n.className="pheno-select-wrapper-all-years",i.appendChild(r),i.appendChild(o),i.appendChild(document.createTextNode(e.name)),n.appendChild(i),H.appendChild(n);else{var c=e.name.split(" ").splice(-1);i.appendChild(document.createTextNode(c)),i.appendChild(r),i.appendChild(o),n.appendChild(i),H.appendChild(n)}}}),F.insertBefore(Y,X.node())}(e,a,o,t,n),t.classList.remove("graph-loading")})(n=JSON.parse(n),e,t),(0,r.updatePanelDragOverlayHeight)()}(t,e,n)});h.open("GET",o),h.send()}(e,h,t),h};var r=n(2),a=n(0),o=n(1),i=n(11),l=n(7);var s=46,c=void 0,u=void 0,d=["hoverClosestCartesian","hoverCompareCartesian","lasso2d","select2d","toggleSpikelines"];function p(e){var t,n;e.baseline=[];for(var r=0;r<s;r++){t=[];for(var a=r;a<e.length;a+=s)t.push(parseInt(e[a][1],10));n=f(t),e.baseline.push(n)}return e.baseline}function f(e){var t,n,r=0;for(t=0,n=e.length;t<n;t++)r+=e[t];return(r/n).toString()}function h(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),v(e))}function v(e){if(!m())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;var o,i,l,s,c,u,d,p;o=document.getElementsByClassName("graph-type-btn active")[0],i="graph-"+o.getAttribute("data-type"),o.classList.remove("active"),document.getElementById("graph-list").classList.remove(i),function(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}(e),m()||(l=n,s=t,c=r,u=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,d=document.getElementsByClassName("graph-elem")[0].scrollHeight,p=u+d/s*(c-l),document.getElementById("right-panel").scrollTop=p),(0,a.updateShareUrl)()}function m(){return void 0===document.getElementsByClassName("graph-elem")[0]}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"legendonly",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"%{customdata|%B %d, %Y}<br>%{y:.1f}<extra></extra>",o={x:[],y:[],dateArray:[]};return e.forEach(function(e,t){45===t?o.x.push(e[0].getDOY()+365):o.x.push(e[0].getDOY()),o.y.push(parseInt(e[1],10)),o.dateArray.push(e[0])}),[{type:"scatter",visible:r,mode:"lines+markers",name:t,x:o.x,y:o.y,customdata:o.dateArray,line:{color:n},hovertemplate:a}]}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"legendonly",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"%{customdata|%B %d, %Y}<br>NDVI: %{r:.1f}<extra></extra>",o={r:[],theta:[],dateArray:[]};return e.forEach(function(e){o.r.push(parseInt(e[1],10)),o.theta.push(E(e[0])),o.dateArray.push(e[0])}),[{inLegend:!0,type:"scatterpolar",visible:r,mode:"lines+markers",name:t,r:o.r,theta:o.theta,customdata:o.dateArray,line:{color:n},hovertemplate:a}]}function b(e,t,n,r,a){return[{type:"scatterpolar",mode:t,name:n,visible:!0,showlegend:!1,r:e.r,theta:e.theta,hovertext:r+": Julian day "+k(e.theta[e.theta.length-1]),hoverinfo:"text",line:{color:a,width:3}}]}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return{showlegend:!1,dragmode:!1,modebar:{orientation:"h"},autoresize:!0,margin:{l:28,r:40,t:20,b:20},height:475,width:475,polar:{domain:{x:[0,100],y:[1,365]},radialaxis:{visible:!0,fixedrange:!0,angle:90,side:"clockwise",tickangle:90,tickvals:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,20,40,60,80],gridcolor:"#E2E2E2",tickfont:{color:"#444"},range:[0,e]},angularaxis:{visible:!0,gridcolor:"#E2E2E2",type:"linear",tickmode:"array",showticklabels:!0,tickvals:L(j),ticktext:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],direction:"clockwise",rotation:!1,period:12}}}}var E=function(e){var t=e.getDOY();return e.getFullYear()%4==0&&e.getMonth()>1&&(t-=1),360*(t-1)/364%360},k=function(e){return Math.round(364*e/360+1)%365},L=function(e){return e.map(function(e){return 360*(e-1)/364%360})},C=function(e,t){return Array(t).fill(e).flat(1)};function O(e,t){var n=[],r=[];e.forEach(function(e,a){n.push(e*Math.cos(Math.PI/180*t[a])),r.push(e*Math.sin(Math.PI/180*t[a]))});var a=n.reduce(function(e,t){return e+t},0)/n.length,o=r.reduce(function(e,t){return e+t},0)/r.length,i=Math.sqrt(a*a+o*o),l=Math.atan(o/a)*(180/Math.PI);return(a<0&&o>0||a<0&&o<0)&&(l+=180),a>0&&o<0&&(l+=360),[i,l]}function P(e,t,n){for(var r=0,a=0;a<e.length;a++)r+=parseInt(e[a],10);for(var o,i,l,s,c=.15*r,u=.8*r,d=!1,p=!1,f=0,h=0;h<e.length;h++)if(f+=parseInt(e[h],10),!d&&f>c){o=h,d=!0;var v=e[h-1]/8,m=(t[h]-t[h-1])/8;i=t[o];for(var y=1;y<=8&&(i-=m,!((f-=v)<c));y++);}else if(!p&&f>u){l=h,p=!0;var g=e[h-1]/8,b=(t[h]-t[h-1])/8;s=t[l];for(var w=0;w<8&&(s-=b,!((f-=g)<u));w++);}else;return{fifteenIndex:o,fifteenEnd:i,eightyIndex:l,eightyEnd:s}}function x(e){var t=(e=e.toString()).substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}var _=["#23758e","#2c798d","#357e8c","#3e838b","#47878a","#518c89","#5a9088","#639587","#6c9a86","#759e85","#7ea384","#88a883","#91ac82","#9ab181","#a3b580","#acba7f","#b5bf7e","#bec37d","#c8c87c","#d1cc7b","#dad17a","#e3d679","#ecda78","#f5df77","#ffe476"],j=[1,32,60,91,121,152,182,213,244,274,305,335]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=function(e,t){!function(e,t){var n=a(function(e){var n=function(e){return t=e=JSON.parse(e),t.map||(t.map={}),function(e){var t,n,a,i,l=(0,r.getStage)(),s=e.layers,c=e.mapserverUrl[l];for(var u in e["active-layers"],s){if(!s.hasOwnProperty(u))return;for(t=s[u],n=0;n<t.length;n++)a=t[n],i=c,a.url=a.url||i,o(t[n],e.defaultLayerOpacity)}}(e),e;var t}(e);t(n)});n.open("GET",e,!0),n.send()}(e,t)},t.GetAjaxObject=a;var r=n(7);function a(e){var t;return(t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest).onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function o(e,t){e.opacity=e.opacity||t}},function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,c=[],u=!1,d=-1;function p(){u&&s&&(u=!1,s.length?c=s.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=l(p);u=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||l(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(3),o=((r=a)&&r.__esModule,function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(6),l=n(14);var s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.handleSubmit,a=void 0===r?function(){}:r,o=n.searchLabel,l=void 0===o?"search":o,s=n.classNames,c=void 0===s?{}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var u=(0,i.createElement)("div",["geosearch",c.container].join(" ")),d=(0,i.createElement)("form",["",c.form].join(" "),u),p=(0,i.createElement)("input",["glass",c.input].join(" "),d);p.type="text",p.placeholder=l,p.addEventListener("input",function(e){t.onInput(e)},!1),p.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),p.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),p.addEventListener("focus",function(e){t.onFocus(e)},!1),p.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:u,form:d,input:p},this.handleSubmit=a}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),a=(r=this.elements).input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===l.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===l.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ENTER_KEY=13,a=t.ESCAPE_KEY=27,o=t.ARROW_DOWN_KEY=40,i=t.ARROW_UP_KEY=38,l=t.ARROW_LEFT_KEY=37,s=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[r,a,o,i,l,s]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=function(e,t){var n,a,o;for(r=t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],n=0;n<t.length;n++)(o=t[n]).active&&(a=s(o),o.layer=a,a.addTo(e));!function(e){var t,n,r,a,o=document.createElement("div");o.className="baselayer-ui";for(var i=0,s=e.length;i<s;i++)(a=e[i]).hasOwnProperty("image")&&((t=document.createElement("div")).setAttribute("data-layer",a.id),(n=document.createElement("img")).setAttribute("src",a.image),n.setAttribute("alt",a.label),n.setAttribute("title",a.label),(r=document.createElement("div")).textContent=a.label,t.appendChild(n),t.appendChild(r),t.addEventListener("click",l),d3.select(t).classed("base-selector",!0).classed("active",a.active),o.appendChild(t));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(o)}(t)};var r,a=n(1),o=n(0),i=t.BASE_LAYER_TYPE="baselayer";function l(e){e.stopPropagation();var t,n,l=this.getAttribute("data-layer");t=this,d3.select(".base-selector.active").classed("active",!1),d3.select(t).classed("active",!0),(n=(0,a.GetMap)()).eachLayer(function(e){e.options.type===i&&n.removeLayer(e)}),function(e){for(var t,n=(0,a.GetMap)(),o=0,i=r.length;o<i;o++)if((t=r[o]).id===e){t.layer||(t.layer=s(t)),t.layer.addTo(n),t.layer.bringToBack();break}}(l),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:l,nonInteraction:!1}),(0,o.updateShareUrl)()}function s(e){return L.tileLayer(e.url,function(e){var t={};e.id&&(t.id=e.id);e.attribution&&(t.attribution=e.attribution);e.subdomains&&(t.subdomains=e.subdomains);return t.type=i,t}(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=function(){d3.selectAll(".panel-top-btn").on("click",o)},t.GetActiveTab=function(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")},t.HandleTabChange=i;var r=n(2),a=n(0);function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){var t;t=d3.select(".panel-top-btn.active").attr("data-active"),d3.selectAll("#map-wrapper, #right-panel").classed(t,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1),function(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),document.getElementById("map-wrapper").classList.add(e),document.getElementById("right-panel").classList.add(e),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),t=document.getElementById("right-panel").offsetWidth,document.getElementById("map-wrapper").style.paddingRight=t+"px",function(){var e=document.getElementById("right-panel"),t=e.style.width;if(!t)return;var n=d3.select(e).style("min-width").slice(0,-2);if(parseInt(t.slice(0,-2),10)>parseInt(n,10))return;e.style.width=""}(),(0,r.updatePanelDragOverlayHeight)();var t}(e),(0,a.updateShareUrl)()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new r.OpenStreetMapProvider,n=new r.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var a=n.searchElement.elements;L.DomEvent.on(a.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=a.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&a.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(a.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(a.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})};var r=n(18)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return u(r).default}});var a=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return u(a).default}});var o=n(26);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return u(o).default}});var i=n(27);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return u(i).default}});var l=n(28);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return u(l).default}});var s=n(29);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return u(s).default}});var c=n(4);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return u(c).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});c(n(3));var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(p),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))};var a=c(n(24)),o=c(n(13)),i=c(n(25)),l=n(6),s=n(14);function c(e){return e&&e.__esModule?e:{default:e}}var u={},d=["dragging","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard"],p={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.handlersDisabled=!1,this.options=r({},{position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(e){return""+e.result.label},marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1},e);var n=this.options,s=n.style,c=n.classNames,u=n.searchLabel,d=n.autoComplete,p=n.autoCompleteDelay;"button"!==s&&(this.options.classNames.container+=" "+e.style),this.searchElement=new o.default(r({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,v=f.form,m=f.input,y=(0,l.createElement)("a",c.button,h);y.title=u,y.href="#",y.addEventListener("click",function(e){t.onClick(e)},!1);var g=(0,l.createElement)("a",c.resetButton,v);g.innerHTML="X",y.href="#",g.addEventListener("click",function(){t.clearResults(null,!0)},!1),d&&(this.resultList=new i.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label,data:n})}}),v.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,a.default)(function(e){return t.autoSearch(e)},p),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e,!0)},!0)),v.addEventListener("mouseenter",function(e){return t.disableHandlers(e)},!0),v.addEventListener("mouseleave",function(e){return t.restoreHandlers(e)},!0),this.elements={button:y,resetButton:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,l.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?((0,l.removeClassName)(n,"active"),this.clearResults()):((0,l.addClassName)(n,"active"),r.focus())},disableHandlers:function(e){var t=this,n=this.searchElement.elements.form;this.handlersDisabled||e&&e.target!==n||(this.handlersDisabled=!0,d.forEach(function(e){t.map[e]&&(u[e]=t.map[e].enabled(),t.map[e].disable())}))},restoreHandlers:function(e){var t=this,n=this.searchElement.elements.form;!this.handlersDisabled||e&&e.target!==n||(this.handlersDisabled=!1,d.forEach(function(e){u[e]&&t.map[e].enable()}))},selectResult:function(e){if([s.ENTER_KEY,s.ARROW_DOWN_KEY,s.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList;if(e.keyCode!==s.ENTER_KEY){var r=n.count()-1;if(!(r<0)){var a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}}else{var l=n.select(n.selected);this.onSubmit({query:t.value,data:l})}}},clearResults:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.keyCode===s.ESCAPE_KEY){var n=this.searchElement.elements.input,r=this.options,a=r.keepResult,o=r.autoComplete;!t&&a||(n.value="",this.markers.clearLayers()),o&&this.resultList.clear()}},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return s.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,r.length?a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),i.call(this)}.$asyncbind(this,n),n):(this.resultList.clear(),i.call(this)));function i(){return t()}}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r;return this.options.provider.search(e).then(function(n){return(r=n)&&r.length>0&&this.showResult(r[0],e),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e,t){var n=t.query,r=this.options.autoClose,a=Object.keys(this.markers._layers);a.length>=this.options.maxMarkers&&this.markers.removeLayer(a[0]);var o=this.addMarker(e,n);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:o}),r&&this.closeResults()},closeResults:function(){var e=this.searchElement.elements.container;e.classList.contains("active")&&(0,l.removeClassName)(e,"active"),this.restoreHandlers(),this.clearResults()},addMarker:function(e,t){var n=this,r=this.options,a=r.marker,o=r.showPopup,i=r.popupFormat,l=new L.Marker([e.y,e.x],a),s=e.label;return"function"==typeof i&&(s=i({query:t,result:e})),l.bindPopup(s),this.markers.addLayer(l),o&&l.openPopup(),a.draggable&&l.on("dragend",function(e){n.map.fireEvent("geosearch/marker/dragend",{location:l.getLatLng(),event:e})}),l},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";(function(t,n){e.exports=function(e){e=e||"object"==typeof t&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var r=function(){var t=[],n=0,r=1024;function a(){for(;t.length-n;){try{t[n]()}catch(e){}t[n++]=void 0,n===r&&(t.splice(0,r),n=0)}}return function(r){t.push(r),t.length-n==1&&e(a)}}();function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"==typeof e))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&r(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&r(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,o={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var i=this.state,l=this.v;r(function(){i(o,l)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(this,n(12),n(21).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(22),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,o,i,l,s=1,c={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(i="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),r=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[s]=a,r(s),s++},p.clearImmediate=f}function f(e){delete c[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(12))},function(e,t){e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(e){}function r(){}function a(n,a){var o=new r;try{this._resolver(function(r){return e(r)?r.then(n,a):t(o,r,n)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function o(e){this._resolver=e,this.then=a}return r.prototype={resolve:n,reject:n,then:function(e,t){this.resolve=e,this.reject=t}},o.resolve=function(e){return o.isThenable(e)?e:{then:function(t){return t(e)}}},o.isThenable=e,o}},function(e,t,n){(function(t){var n="Expected a function",r=NaN,a="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,p=u||d||Function("return this")(),f=Object.prototype.toString,h=Math.max,v=Math.min,m=function(){return p.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==a}(e))return r;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=l.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):i.test(e)?r:+e}e.exports=function(e,t,r){var a,o,i,l,s,c,u=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError(n);function b(t){var n=a,r=o;return a=o=void 0,u=t,l=e.apply(r,n)}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-u>=i}function E(){var e=m();if(w(e))return k(e);s=setTimeout(E,function(e){var n=t-(e-c);return p?v(n,i-(e-u)):n}(e))}function k(e){return s=void 0,f&&a?b(e):(a=o=void 0,l)}function L(){var e=m(),n=w(e);if(a=arguments,o=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(E,t),d?b(e):l}(c);if(p)return s=setTimeout(E,t),b(c)}return void 0===s&&(s=setTimeout(E,t)),l}return t=g(t)||0,y(r)&&(d=!!r.leading,i=(p="maxWait"in r)?h(g(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f),L.cancel=function(){void 0!==s&&clearTimeout(s),u=0,a=c=o=s=void 0},L.flush=function(){return void 0===s?l:k(m())},L}}).call(this,n(8))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6);var o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,r=void 0===n?function(){}:n,i=t.classNames,s=void 0===i?{}:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.call(this),this.props={handleClick:r,classNames:s},this.selected=-1;var c=(0,a.createElement)("div",o("results",s.container)),u=(0,a.createElement)("div",o(s.item));c.addEventListener("click",this.onClick,!0),this.elements={container:c,resultItem:u}}return r(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,a.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,a.addClassName)(t,"active"):(0,a.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results?this.results.length:0}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,a.removeClassName)(e,"active")}}]),e}(),l=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key"),i=e.results[o];r({result:i})}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(3));var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(4)),i=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,a=e.jsonp,o=this.options.params,i=this.getParamString(r({},o,{query:t,jsonp:a}));return n+"//dev.virtualearth.net/REST/v1/Locations?"+i}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,l,s;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),l=this.endpoint({query:r,protocol:a,jsonp:o}),(0,i.createScriptElement)(l,o).then(function(e){return s=e,t(this.parse({data:s}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),l=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,o=this.getParamString(a({},r,{f:"json",text:t}));return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+o}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),l=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,o=this.getParamString(a({},r,{address:t})),i=r&&r.key?"https:":n;return i+"//maps.googleapis.com/maps/api/geocode/json?"+o}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(n(3));var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=this.options.params,a=this.getParamString(r({},n,{format:"json",q:t}));return"https://nominatim.openstreetmap.org/search?"+a}},{key:"endpointReverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=this.options.params,a=this.getParamString(r({},n,{format:"json",osm_id:t.raw.osm_id,osm_type:this.translateOsmType(t.raw.osm_type)}));return"https://nominatim.openstreetmap.org/reverse?"+a}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,l;return r=e.query,a=e.data,o=~location.protocol.indexOf("http")?location.protocol:"https:",i=a?this.endpointReverse({data:a,protocol:o}):this.endpoint({query:r,protocol:o}),fetch(i).then(function(e){return e.json().then(function(e){return l=e,t(this.parse({data:a?[l]:l}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"translateOsmType",value:function(e){return"node"===e?"N":"way"===e?"W":"relation"===e?"R":""}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMarker=function(e,t){return L.marker([e,t],{icon:a})},t.getIcon=function(e){return"hover"===e?o:a};var r=L.Icon.extend({}),a=new r({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),o=new r({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=i,t.makeOpacitySlider=function(e){void 0!==e.opacity&&e.opacity;var t=document.createElement("div"),n=function(e,t){var n=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");n.classList.add("opacity-slider-track-overlay"),o.classList.add("opacity-slider-track"),s.classList.add("opacity-slider-handle"),n.appendChild(o),n.appendChild(s),e.active&&i(e,s);return function(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],r=l(e);(0,a.updateLayerOpacity)(t,r),i(t,n,r)}).on("end",function(){var n=l(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,r.updateShareUrl)()}))}(n,e),n}(e),o=function(e,t,n){var r=document.createElement("div"),o=document.createElement("img");return r.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),r.appendChild(o),r.onclick=function(e){var r=n.getElementsByClassName("opacity-slider-handle")[0];(0,a.updateLayerOpacity)(t,0),i(t,r,0)},r}("closed",e,n);return t.classList.add("opacity-slider-wrapper"),t.appendChild(n),t.appendChild(o),t};var r=n(0),a=n(5),o=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0);function i(e,t,n){n=n||e.opacity,t.style.top=o(n)+"px"}function l(e){var t=d3.mouse(e)[1];return o.invert(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.image)return;var t=function(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}(),n=function(e){var t=document.createElement("img");t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label));return t}(e),r=e.link?function(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}(e.link):null;r?(r.appendChild(n),t.appendChild(r)):t.appendChild(n);var a=document.getElementsByClassName(e.location)[0],o=a.firstChild;a.insertBefore(t,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d3.select("#mobile-toggle-panel-button").on("click",o),d3.selectAll("#mobile-clear-map-button").on("click",a)};var r=n(1);function a(){d3.event.stopPropagation(),(0,r.clearMap)(),ga("send","event",{eventCategory:"mobile clearmap",eventAction:"click",eventLabel:"Mobile Clear Map",nonInteraction:!1})}function o(){d3.event.stopPropagation();var e=d3.select("#wrapper"),t=e.classed("mobile-menu-hidden");e.classed("mobile-menu-hidden",!t),function(e){ga("send","event",{eventCategory:"mobile menu",eventAction:"click",eventLabel:"Mobile Panel Toggle"+e,nonInteraction:!1})}(t?"closing":"opening")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d3.select("#toggle-panel-button").on("click",o),d3.selectAll("#clear-map-button").on("click",a)};var r=n(1);function a(e){d3.event.stopPropagation(),(0,r.clearMap)(),ga("send","event",{eventCategory:"desktop",eventAction:"click",eventLabel:"Clear Map Btn",nonInteraction:!1})}function o(e){d3.event.stopPropagation();var t=d3.select("#wrapper"),n=t.classed("panel-active");t.classed("panel-active",!n),t.classed("panel-inactive",n),(0,r.GetMap)().invalidateSize({pan:!1}),function(e){ga("send","event",{eventCategory:"desktop",eventAction:"click",eventLabel:"Panel Toggle "+e,nonInteraction:!1})}(n?"Close":"Open")}},function(e,t,n){var r=n(36);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(37)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){},function(e,t,n){var r,a,o={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,c=0,u=[],d=n(38);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=o[r.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(g(r.parts[i],t))}else{var l=[];for(i=0;i<r.parts.length;i++)l.push(g(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:l}}}}function f(e,t){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(l):n.push(r[i]={id:i,parts:[l]})}return n}function h(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,a)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),h(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,r,a,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var i=c++;n=s||(s=m(t)),r=E.bind(null,n,i,!1),a=E.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=d(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}.bind(null,n,t),a=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var i=n[a];(l=o[i.id]).refs--,r.push(l)}e&&p(f(e,t),t);for(a=0;a<r.length;a++){var l;if(0===(l=r[a]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete o[l.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function E(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(a=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}}]);